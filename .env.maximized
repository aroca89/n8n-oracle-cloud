# üöÄ n8n Powerhouse - Configuraci√≥n MAXIMIZADA
# Optimizado para Oracle Cloud ARM A1 (4 OCPUs + 24GB RAM)

# === CONFIGURACI√ìN GENERAL ===
COMPOSE_PROJECT_NAME=n8n-powerhouse
TIMEZONE=Europe/Madrid

# === NETWORKING ===
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=https
PUBLIC_IP=TU_IP_PUBLICA_AQUI
DOMAIN_URL=https://TU_IP_PUBLICA_AQUI
WEBHOOK_URL=https://TU_IP_PUBLICA_AQUI

# === N8N AUTHENTICATION ===
N8N_USER=admin
N8N_PASSWORD=GENERAR_PASSWORD_SEGURO
N8N_ENCRYPTION_KEY=GENERAR_KEY_32_CHARS

# === DATABASE CONFIGURATION ===
POSTGRES_DB=n8n_powerhouse
POSTGRES_USER=n8n_admin
POSTGRES_PASSWORD=GENERAR_PASSWORD_SEGURO

# === REDIS CONFIGURATION ===
REDIS_PASSWORD=GENERAR_PASSWORD_SEGURO

# === MONITORING ===
GRAFANA_PASSWORD=GENERAR_PASSWORD_SEGURO

# === PERFORMANCE SETTINGS ===
# Configuraci√≥n autom√°tica seg√∫n recursos detectados
HIGH_PERFORMANCE=true
MEMORY_OPTIMIZED=false

# === N8N PERFORMANCE TUNING ===
# Workers y procesos
N8N_WORKERS_AUTO_SCALE_MAX_WORKERS=8
N8N_WORKERS_AUTO_SCALE_MIN_WORKERS=2
N8N_WORKERS_CONCURRENCY=10

# Timeouts y l√≠mites
N8N_DEFAULT_BINARY_DATA_MODE=filesystem
N8N_BINARY_DATA_TTL=60
N8N_EXECUTION_TIMEOUT=3600
N8N_EXECUTION_TIMEOUT_MAX=7200

# === POSTGRESQL PERFORMANCE ===
POSTGRES_SHARED_BUFFERS=6GB
POSTGRES_EFFECTIVE_CACHE_SIZE=18GB
POSTGRES_MAINTENANCE_WORK_MEM=2GB
POSTGRES_WORK_MEM=256MB
POSTGRES_MAX_CONNECTIONS=200

# === NGINX PERFORMANCE ===
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=4096
NGINX_CLIENT_MAX_BODY_SIZE=100M

# === BACKUP CONFIGURATION ===
BACKUP_RETENTION_DAYS=7
BACKUP_COMPRESSION=gzip

# === LOGGING ===
LOG_LEVEL=info
LOG_OUTPUT=combined

# === SECURITY ===
# SSL/TLS
SSL_CERT_PATH=/etc/nginx/ssl/nginx-selfsigned.crt
SSL_KEY_PATH=/etc/nginx/ssl/nginx-selfsigned.key

# Rate limiting
RATE_LIMIT_LOGIN=2r/m
RATE_LIMIT_API=10r/s
RATE_LIMIT_WEBHOOK=20r/s

# === CLOUDFLARE INTEGRATION (opcional) ===
# Descomentar si usas Cloudflare
# CLOUDFLARE_ZONE_ID=tu_zone_id
# CLOUDFLARE_API_TOKEN=tu_api_token
# USE_CLOUDFLARE_SSL=true

# === NOTIFICACIONES (opcional) ===
# Telegram
# TELEGRAM_BOT_TOKEN=tu_bot_token
# TELEGRAM_CHAT_ID=tu_chat_id

# Slack
# SLACK_WEBHOOK_URL=tu_webhook_url

# Email SMTP
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=tu_email@gmail.com
# SMTP_PASS=tu_app_password

# === MONITOREO AVANZADO ===
# Prometheus
PROMETHEUS_RETENTION_TIME=7d
PROMETHEUS_STORAGE_PATH=/prometheus

# Grafana
GRAFANA_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# === DESARROLLO Y DEBUG ===
DEBUG_MODE=false
DEVELOPMENT_MODE=false

# === NOTAS ===
# Este archivo debe ser copiado como .env y personalizado
# Generar passwords seguros con: openssl rand -base64 32
# Verificar IP p√∫blica con: curl ifconfig.me